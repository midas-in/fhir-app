"use strict";(self.webpackChunkfhircore=self.webpackChunkfhircore||[]).push([[1962],{4223:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>h,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>o});var r=n(5893),t=n(1151);const s={},l="Testing FHIR Resources",a={id:"engineering/writing-fhir/testing-resources",title:"Testing FHIR Resources",description:"Step 1 - Creating Patient Resources",source:"@site/docs/engineering/writing-fhir/testing-resources.md",sourceDirName:"engineering/writing-fhir",slug:"/engineering/writing-fhir/testing-resources",permalink:"/engineering/writing-fhir/testing-resources",draft:!1,unlisted:!1,editUrl:"https://github.com/opensrp/fhircore/tree/main/docs/engineering/writing-fhir/testing-resources.md",tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Smart Vaccination Certificates",permalink:"/engineering/writing-fhir/smart-vax-certs"},next:{title:"Tooling",permalink:"/engineering/writing-fhir/tooling/"}},h={},o=[{value:"Step 1 - Creating Patient Resources",id:"step-1---creating-patient-resources",level:2},{value:"Pre-requisite",id:"pre-requisite",level:3},{value:"Exercise",id:"exercise",level:3},{value:"Setup VSCode to begin FHIR",id:"setup-vscode-to-begin-fhir",level:3},{value:"Creating a patient resource",id:"creating-a-patient-resource",level:3},{value:"Step 2 - Searching",id:"step-2---searching",level:2},{value:"Pre-requisite",id:"pre-requisite-1",level:3},{value:"Exercise",id:"exercise-1",level:3},{value:"Search Exercise",id:"search-exercise",level:3},{value:"Step 3 - Bundles",id:"step-3---bundles",level:2}];function c(e){const i={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h1,{id:"testing-fhir-resources",children:"Testing FHIR Resources"}),"\n",(0,r.jsx)(i.h2,{id:"step-1---creating-patient-resources",children:"Step 1 - Creating Patient Resources"}),"\n",(0,r.jsx)(i.h3,{id:"pre-requisite",children:"Pre-requisite"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"VS Code"}),"\n",(0,r.jsx)(i.li,{children:"Browser"}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://insomnia.rest/",children:"Insomnia"})," or ",(0,r.jsx)(i.a,{href:"https://www.postman.com/downloads/",children:"Postman"})]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"exercise",children:"Exercise"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Convert the below patient record (unstructured) to a FHIR patient resource"}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"Name: Pablo Emilio Escobar Gaviria\nGender: Male\nDOB: 1, December 1949\nPhone: 2908409234\nEmail: pablo@narcos.mx\nAddress : 213, Rionegro, Medell\xedn, Colombia\n"})}),"\n",(0,r.jsx)(i.h3,{id:"setup-vscode-to-begin-fhir",children:"Setup VSCode to begin FHIR"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Go to the ",(0,r.jsx)(i.a,{href:"https://www.hl7.org/fhir",children:"FHIR website"}),". Everything you need to know about FHIR standard and also the source of truth"]}),"\n",(0,r.jsxs)(i.li,{children:["Download the ",(0,r.jsx)(i.a,{href:"https://www.hl7.org/fhir/fhir.schema.json.zip",children:"FHIR JSON Schema"})]}),"\n",(0,r.jsx)(i.li,{children:"Add a File with fhir.schema.json to your project folder"}),"\n",(0,r.jsx)(i.li,{children:"Congifgure the workspace settings by clicking ctr+shift+p or cmd+shit+p then type workspace settings, then add the following code"}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:'{\n  "json.schemas": [\n      {\n          "fileMatch": [\n              "*.fhir.json"\n          ],\n          "url": "./fhir.schema.json"\n      }\n  ]\n}\n'})}),"\n",(0,r.jsx)(i.h3,{id:"creating-a-patient-resource",children:"Creating a patient resource"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"In the project folder, create a resource (patient.fhir.json)"}),"\n",(0,r.jsxs)(i.li,{children:["Go to the ",(0,r.jsx)(i.a,{href:"https://www.hl7.org/fhir/patient.html",children:"patient resource"})," to learn more about the patient resources"]}),"\n",(0,r.jsx)(i.li,{children:"Start by adding the braces "}),"\n",(0,r.jsx)(i.li,{children:"Use autocomplete to fill in the resource (patient) attributes - Press ctrl+space and press enter once you get the key for the resource"}),"\n",(0,r.jsx)(i.li,{children:"Manually add/type value for the key"}),"\n",(0,r.jsx)(i.li,{children:"VSCode will let you know of any errors/validation/type for the key selected in the problems pane"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Creating a patient resource extensions and ",(0,r.jsx)(i.a,{href:"https://www.hl7.org/fhir/patient-profiles.html",children:"profiles"}),"."]}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsx)(i.p,{children:"NB. The use of extensions should be controlled to avoid duplication or corruption of the file"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Also check out ",(0,r.jsx)(i.a,{href:"https://simplifier.net/",children:"Simplifier"})," to do it online :)"]}),"\n",(0,r.jsx)(i.h2,{id:"step-2---searching",children:"Step 2 - Searching"}),"\n",(0,r.jsx)(i.h3,{id:"pre-requisite-1",children:"Pre-requisite"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["HL7 has ",(0,r.jsx)(i.a,{href:"https://wiki.hl7.org/Publicly_Available_FHIR_Servers_for_testing",children:"publicly available servers"})]}),"\n",(0,r.jsxs)(i.li,{children:["We shall be using ",(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4",children:"HAPI R4"})," for the API test"]}),"\n",(0,r.jsxs)(i.li,{children:["You can use ",(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/resource?encoding=null&pretty=true&resource=Patient",children:"this GUI"})," to do the same. Select the Health Intersection R4 server."]}),"\n",(0,r.jsx)(i.li,{children:"We can use Insomnia to test our resources"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"exercise-1",children:"Exercise"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"In Insomnia/Postman you can create a FHIR project folder"}),"\n",(0,r.jsxs)(i.li,{children:["You can use the following operations on the base url : in this case using publicly available HAPI server url","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4",children:(0,r.jsx)(i.code,{children:"OPTIONS"})})," - Get the capability statement for the FHIR server"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Patient/id",children:(0,r.jsx)(i.code,{children:"GET"})})," - Get resource or search"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Patient",children:(0,r.jsx)(i.code,{children:"POST"})})," - Create a resource"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Patient/id",children:(0,r.jsx)(i.code,{children:"PUT"})})," - Update a resource"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Resources to create","\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Create a Patient"}),"\n",(0,r.jsx)(i.li,{children:"Create a Patient with extension"}),"\n",(0,r.jsx)(i.li,{children:"Get Patient"}),"\n",(0,r.jsx)(i.li,{children:"Create Patient Observation"}),"\n",(0,r.jsx)(i.li,{children:"Update Patient Observation"}),"\n",(0,r.jsx)(i.li,{children:"Search Patient Observation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"search-exercise",children:"Search Exercise"}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsx)(i.p,{children:"NB. Add your patient_id where id is given or value for xxx"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["We can also perform search examples via URL as described in the ",(0,r.jsx)(i.a,{href:"https://www.hl7.org/fhir/searchparameter.html",children:"search parameters doc"}),"."]}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["All patient whose name starts with X - ",(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Patient?name=xxx",children:"http://hapi.fhir.org/baseR4/Patient?name=xxx"})]}),"\n",(0,r.jsxs)(i.li,{children:["All patient whose family name starts with X - ",(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Patient?family=xxx",children:"http://hapi.fhir.org/baseR4/Patient?family=xxx"})]}),"\n",(0,r.jsxs)(i.li,{children:["All patient observations by patient name  - ",(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Observation?subject.name=xxx",children:"http://hapi.fhir.org/baseR4/Observation?subject.name=xxx"})]}),"\n",(0,r.jsxs)(i.li,{children:["All patient observations by patient id  - ",(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Observation?patient=Patient/id",children:"http://hapi.fhir.org/baseR4/Observation?patient=Patient/id"})]}),"\n",(0,r.jsxs)(i.li,{children:["All BP observations by code - ",(0,r.jsx)(i.a,{href:"http://hapi.fhir.org/baseR4/Observation?patient=Patient/id&code=http://lonic.org%7C15074-8",children:"http://hapi.fhir.org/baseR4/Observation?patient=Patient/id&code=http://lonic.org|15074-8"}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsxs)(i.p,{children:["NB. the BP code used was ",(0,r.jsx)(i.a,{href:"http://lonic.org%7C15074-8",children:"http://lonic.org|15074-8"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"step-3---bundles",children:"Step 3 - Bundles"}),"\n",(0,r.jsxs)(i.p,{children:["We are going to work on the ",(0,r.jsx)(i.a,{href:"https://www.hl7.org/fhir/bundle.html",children:"Transaction Bundle"})," with a conditional update."]}),"\n",(0,r.jsx)(i.p,{children:"This takes multiple resources to POST concurrently to the FHIR server. It's an all or nothing success scenario."}),"\n",(0,r.jsx)(i.p,{children:"Example TBC"})]})}function d(e={}){const{wrapper:i}={...(0,t.a)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},1151:(e,i,n)=>{n.d(i,{Z:()=>a,a:()=>l});var r=n(7294);const t={},s=r.createContext(t);function l(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);